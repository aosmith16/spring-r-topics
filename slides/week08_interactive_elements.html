<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Interactive elements in HTML documents</title>
    <meta charset="utf-8" />
    <meta name="author" content="   Ariel Muldoon" />
    <meta name="date" content="2021-05-18" />
    <script src="week08_interactive_elements_files/header-attrs/header-attrs.js"></script>
    <link href="week08_interactive_elements_files/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/fontawesome/js/fontawesome-all.min.js"></script>
    <meta name="github-repo" content="aosmith16/spring-r-topics"/>
    <meta name="twitter:title" content="Interactive elements in HTML documents"/>
    <meta name="twitter:description" content="Adding interactive plots and R objects"/>
    <meta name="twitter:url" content="https://aosmith16.github.io/spring-r-topics/slides/week08_interactive_elements.html"/>
    <meta name="twitter:image:src" content="https://raw.githubusercontent.com/aosmith16/spring-r-topics/main/slides/week08-share-card.png"/>
    <meta name="twitter:image:alt" content="Slides discussing a few packages for adding interactive elements to static HTML documents Working sessions class spring 2021"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@aosmith16"/>
    <meta name="twitter:site" content="@aosmith16"/>
    <meta property="og:title" content="Interactive elements in HTML documents"/>
    <meta property="og:description" content="Adding interactive plots and R objects"/>
    <meta property="og:url" content="https://aosmith16.github.io/spring-r-topics/slides/week08_interactive_elements.html"/>
    <meta property="og:image" content="https://raw.githubusercontent.com/aosmith16/spring-r-topics/main/slides/week08-share-card.png"/>
    <meta property="og:image:alt" content="Slides discussing a few packages for adding interactive elements to static HTML documents Working sessions class spring 2021"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Ariel Muldoon"/>
    <script src="week08_interactive_elements_files/fabric/fabric.min.js"></script>
    <link href="week08_interactive_elements_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30}) })</script>
    <script src="week08_interactive_elements_files/clipboard/clipboard.min.js"></script>
    <link href="week08_interactive_elements_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="week08_interactive_elements_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/tile-view/tile-view.js"></script>
    <script src="week08_interactive_elements_files/js-cookie/js.cookie.js"></script>
    <script src="week08_interactive_elements_files/peerjs/peerjs.min.js"></script>
    <script src="week08_interactive_elements_files/tiny.toast/toast.min.js"></script>
    <link href="week08_interactive_elements_files/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="week08_interactive_elements_files/htmlwidgets/htmlwidgets.js"></script>
    <script src="week08_interactive_elements_files/pymjs/pym.v1.js"></script>
    <script src="week08_interactive_elements_files/widgetframe-binding/widgetframe.js"></script>
    <script src="week08_interactive_elements_files/jquery/jquery.min.js"></script>
    <link href="week08_interactive_elements_files/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/datatables-binding/datatables.js"></script>
    <link href="week08_interactive_elements_files/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="week08_interactive_elements_files/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="week08_interactive_elements_files/nouislider/jquery.nouislider.min.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/nouislider/jquery.nouislider.min.js"></script>
    <link href="week08_interactive_elements_files/selectize/selectize.bootstrap3.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/selectize/selectize.min.js"></script>
    <link href="week08_interactive_elements_files/crosstalk/css/crosstalk.css" rel="stylesheet" />
    <script src="week08_interactive_elements_files/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="wrap.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Interactive elements in HTML documents
## <span>&lt;i class="fas  fa-rocket fa-lg faa-spin animated-hover " data-fa-transform="grow-15 " style=" color:#F4790B;"&gt;&lt;/i&gt;</span>
### <br/><br/><br/>Ariel Muldoon
### May 18, 2021

---
















## Today's Goal

**Practice adding interactive elements to static HTML documents**

Today is like a tasting menu of tools. We will briefly explore  

- **plotly** to add interactivity to plots made with **ggplot2**  
- **DT** to allow for users to interact with a dataset  
- **leaflet** for interactive maps  
- **dygraph** to make interactive plots of time series data  
- Adding interactive elements from packages above to a dashboard made with **flexdashboard**  

--

&lt;br/&gt;
*Before we begin:*

Make sure you saved `week08_interaction.Rmd` from the class website onto your computer. We will be adding code and knitting to HTML within this file.

???

There is so much more you can do with each of these tools that this session will barely scratch the surface

---


## Resources

- [Intro to **htmlwidgets**](https://www.htmlwidgets.org/)   
- [Using **plotly** for interactive plots](https://plotly.com/r/)  
- [Interactive R data objects with **DT**](https://rstudio.github.io/DT/)    
- [Interactive maps with **leaflet**](https://rstudio.github.io/leaflet/)    
- [Charting time series data in R with **dygraphs**](https://rstudio.github.io/dygraphs/)  
- [Interactive dashboards in R with **flexdashboard**](https://rmarkdown.rstudio.com/flexdashboard/)  

.center[
&lt;img src="figs/week08_files/flexdashboard.png" title="usethis hex logo" alt="usethis hex logo" width="25%" /&gt;
]

---

class: center, middle, inverse, hide-logo

# &lt;font style="font-family: cursive; font-style:italic"&gt;Let's get started!&lt;/font&gt;

---

## Running code

- Open the copy of [`week08_interaction.Rmd`](files/week08_interaction.Rmd) that you saved and knit it to explore the HTML output document.  

- We'll be looking at the code from different packages that I used to add interactive elements to the output.   

- Since we're just looking at a variety of packages tasting-menu style you won't be practicing writing your own code.

---

## R packages 

Load **palmerpenguins 0.2.2** and **ggplot2 1.0.5** now.

We'll be loading additional packages as we go so we are clear on which package we are using in each section.  


```r
library(palmerpenguins) # v. 0.1.0
library(ggplot2) # v. 3.3.3
```

---

class: with-logo logo-penguins

## Penguin dataset

We will work with the Palmer penguin data while exploring the first two packages.

This dataset includes various size measurements for three penguin species on the Palmer Archipelago, as well as `sex` and measurement `year`. See `?penguins` for more information.

Here are the first 5 lines.


```r
head(penguins, n = 5)
```


|species |island    | bill_length_mm| bill_depth_mm| flipper_length_mm| body_mass_g|sex    | year|
|:-------|:---------|--------------:|-------------:|-----------------:|-----------:|:------|----:|
|Adelie  |Torgersen |           39.1|          18.7|               181|        3750|male   | 2007|
|Adelie  |Torgersen |           39.5|          17.4|               186|        3800|female | 2007|
|Adelie  |Torgersen |           40.3|          18.0|               195|        3250|female | 2007|
|Adelie  |Torgersen |             NA|            NA|                NA|          NA|NA     | 2007|
|Adelie  |Torgersen |           36.7|          19.3|               193|        3450|female | 2007|

---

class: with-logo logo-plotly

## plotly for interactive ggplot2

[Plotly](https://plotly.com/graphing-libraries/) can be used to make a wide variety of interactive charts and maps in Python, R, and JavaScript.  

In R, the **plotly** package is for building stand-alone interactive graphics or for making our static plots interactive. ðŸ˜®  

--

We will use `ggplotly()` to add interactive elements to plots we made with **ggplot2**.

First, load the **plotly** package.


```r
library(plotly) # v. 4.9.3
```

---

class: with-logo logo-plotly

## plotly for interactive ggplot2

The first step is to make a standard **ggplot2** plot. Here we make a scatterplot of `bill_length_mm` vs `bill_depth_mm` for each `species` of penguin. The plot is named `g1`.



```r
g1 = ggplot(data = penguins, 
            aes(x = bill_depth_mm, 
                y = bill_length_mm,
                color = species)) +
  geom_point()
```


&lt;br/&gt;&lt;br/&gt;&lt;br/&gt;
You are welcome to add code to the RMD file to print this plot if you'd like but we won't do it here. Instead let's jump to adding interactivity.


---

class: with-logo logo-plotly

## plotly for interactive ggplot2

.pull-left[
We can use `ggplotly()` to convert a plot made with **ggplot2** into an interactive **plotly** object.  


```r
ggplotly(g1)
```
]

--

.pull-right[
Go to the knitted HTML output from `week08_interaction.Rmd` to see what this looks. 

The table of contents on the left should help you navigate, as needed.
]

---

class: with-logo logo-plotly

## plotly for interactive ggplot2

.pull-left[
Take a few minutes to explore the interactive features, such as zooming, panning, and hovering. 

&lt;br/&gt;
Click on legend items to focus on one group. 

&lt;br/&gt;
Double click the plot or click on the "Reset axes" button to reset.
]

.pull-right[
<div id="htmlwidget-e9f98f028f399a4721cc" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-e9f98f028f399a4721cc">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-5.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

???

The selection tool seems to be most useful when you want to make interactive output (like in a shiny app) but you can link two plots together using `highlight_key()`.


---

class: with-logo logo-plotly

### Changing the hover text

A **tooltip** is generic term for the text that pops up when hovering over an interactive element. By default, `ggplotly()` includes all plotted data in the tooltip.

.pull-left[
We can change this with the `tooltip` argument in `ggplotly()`. 

&lt;br/&gt;
Let's get just the `y` and `x` values (in that order), leaving the `color` values out of the tooltip.
]

.pull-right[
&lt;br/&gt;

```r
ggplotly(g1, tooltip = c("y", "x"))
```
]

---

class: with-logo logo-plotly

### Changing the hover text

.pull-left[
The next plot in the HTML output doc shows the new tooltip info. 
]

.pull-right[
<div id="htmlwidget-82e3738cb00cd3803dee" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-82e3738cb00cd3803dee">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-7.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-plotly

### Linking two plots

You may have noted that you could select or *highlight* points in the scatterplot but then couldn't do anything with them.  

The select tool becomes most useful if including the plot in a larger app, but there are also some built-in tools in **plotly** where selection is useful. This makes use of package **crosstalk** under the hood.

--

&lt;br/&gt;&lt;br/&gt;
We start by using `highlight_key()` on the dataset we are plotting.


```r
peng2 = highlight_key(penguins)
```

---

class: with-logo logo-plotly

### Linking two plots

.pull-left[
Then we'll make two **ggplot2** plots based on this highlighted dataset `peng2`. 

&lt;br/&gt;
The first is the same scatterplot we used before without the species info and the second is `flipper_length_mm` vs `body_mass_g`.
]

.pull-right[

```r
g2 = ggplot(data = peng2, 
            aes(x = bill_depth_mm, 
                y = bill_length_mm)) +
  geom_point()
```


```r
g3 = ggplot(data = peng2,
            aes(x = body_mass_g, 
                y = flipper_length_mm)) +
  geom_point()
```
]

---

class: with-logo logo-plotly

### Linking two plots

.pull-left[
Now we link the plots together using the `subplot()` function and use the `highlight()` function to allow selection across the two now-linked plots. 
]

.pull-left[

```r
g2 %&gt;%
  subplot(g3) %&gt;%
  highlight(on = "plotly_selected",
            off = "plotly_deselect")
```
]

---

class: with-logo logo-plotly

### Linking two plots

.pull-left[
When we select points in the first, the same points are selected in the second. This allows the user to explore more variables at one time.

&lt;br/&gt;
I found things were a little more awkward for plots with legends. It helps to remove the legend is removed from one of the plots using `plotly::style()`.
]

.pull-right[
<div id="htmlwidget-d28c271a6368eee9b437" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-d28c271a6368eee9b437">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-12.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

## DT for interactive data

The [**DT** package](https://rstudio.github.io/DT/) allows us to display R data objects such as data.frames as interactive tables of data in HTML outputs.

For example, it provides the user the ability to filter and sort the data in the output table.  

--

Start by loading package **DT**.


```r
library(DT) # v. 0.18
```

---

## DT for interactive data

.pull-left[
The `datatable()` function creates the interactive output.

Much of the time using `datatable()` directly will be sufficient for the interactivity we want.
]

.pull-right[
The simple code below is a good start for exploring the default output from `datatable()`.


```r
datatable(penguins)
```
]

---
## DT for interactive data

.pull-left[
Take a few minutes and explore the interactive output table in the HTML document.

&lt;br/&gt;
The results are *paginated*, defaulting to showing 10 rows per page. Click on a page to move through more rows. Change the number of rows showing with the drop-down menu.

&lt;br/&gt;
You can sort by columns and filter to values using the overall search box.
]

.pull-right[
&lt;br/&gt;
<div id="htmlwidget-64d40d781d6cb5b0f8cd" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-64d40d781d6cb5b0f8cd">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-15.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

### Change table options

There are so many options you can change via the `options` argument that they have their own [own article on the **DT** website](https://rstudio.github.io/DT/options.html).

.pull-left[
&lt;br/&gt;
Here we change the default page length to 5 and the numbers in the drop down menu of page lengths to 5, 7, or 10.
]

.pull-right[
&lt;br/&gt;
.smaller[

```r
datatable(penguins,
*         options = list(pageLength = 5,
*                        lengthMenu = c(5, 7, 10)))
```
]
]

---

### Change table options

.pull-left[
The table now shows fewer rows on each page by default.

We also now have only the three options for how many rows to show at one time under `Show`.
]

.pull-right[
<div id="htmlwidget-8d158136146245e302e9" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-8d158136146245e302e9">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-17.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

### Add column filters


We can generate filters for each column in addition to the overall `Search` by adding the `filter` argument. We'll place these at the `top` of the table.


```r
datatable(penguins,
*         filter = "top",
          options = list(autoWidth = TRUE,
                         columnDefs = list(list(width = '80px', targets = "_all"))))
```

<div id="htmlwidget-a9c03a61a8ddcfbf8c37" style="width:100%;height:auto;" class="datatables html-widget"></div>
<script type="application/json" data-for="htmlwidget-a9c03a61a8ddcfbf8c37">{"x":{"filter":"top","filterHTML":"<tr>\n  <td><\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Adelie&quot;,&quot;Chinstrap&quot;,&quot;Gentoo&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;Biscoe&quot;,&quot;Dream&quot;,&quot;Torgersen&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"32.1\" data-max=\"59.6\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"number\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"13.1\" data-max=\"21.5\" data-scale=\"1\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"172\" data-max=\"231\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2700\" data-max=\"6300\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n  <td data-type=\"factor\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"width: 100%; display: none;\">\n      <select multiple=\"multiple\" style=\"width: 100%;\" data-options=\"[&quot;female&quot;,&quot;male&quot;]\"><\/select>\n    <\/div>\n  <\/td>\n  <td data-type=\"integer\" style=\"vertical-align: top;\">\n    <div class=\"form-group has-feedback\" style=\"margin-bottom: auto;\">\n      <input type=\"search\" placeholder=\"All\" class=\"form-control\" style=\"width: 100%;\"/>\n      <span class=\"glyphicon glyphicon-remove-circle form-control-feedback\"><\/span>\n    <\/div>\n    <div style=\"display: none; position: absolute; width: 200px;\">\n      <div data-min=\"2007\" data-max=\"2009\"><\/div>\n      <span style=\"float: left;\"><\/span>\n      <span style=\"float: right;\"><\/span>\n    <\/div>\n  <\/td>\n<\/tr>","data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344"],["Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Adelie","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Gentoo","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap","Chinstrap"],["Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Torgersen","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Biscoe","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream","Dream"],[39.1,39.5,40.3,null,36.7,39.3,38.9,39.2,34.1,42,37.8,37.8,41.1,38.6,34.6,36.6,38.7,42.5,34.4,46,37.8,37.7,35.9,38.2,38.8,35.3,40.6,40.5,37.9,40.5,39.5,37.2,39.5,40.9,36.4,39.2,38.8,42.2,37.6,39.8,36.5,40.8,36,44.1,37,39.6,41.1,37.5,36,42.3,39.6,40.1,35,42,34.5,41.4,39,40.6,36.5,37.6,35.7,41.3,37.6,41.1,36.4,41.6,35.5,41.1,35.9,41.8,33.5,39.7,39.6,45.8,35.5,42.8,40.9,37.2,36.2,42.1,34.6,42.9,36.7,35.1,37.3,41.3,36.3,36.9,38.3,38.9,35.7,41.1,34,39.6,36.2,40.8,38.1,40.3,33.1,43.2,35,41,37.7,37.8,37.9,39.7,38.6,38.2,38.1,43.2,38.1,45.6,39.7,42.2,39.6,42.7,38.6,37.3,35.7,41.1,36.2,37.7,40.2,41.4,35.2,40.6,38.8,41.5,39,44.1,38.5,43.1,36.8,37.5,38.1,41.1,35.6,40.2,37,39.7,40.2,40.6,32.1,40.7,37.3,39,39.2,36.6,36,37.8,36,41.5,46.1,50,48.7,50,47.6,46.5,45.4,46.7,43.3,46.8,40.9,49,45.5,48.4,45.8,49.3,42,49.2,46.2,48.7,50.2,45.1,46.5,46.3,42.9,46.1,44.5,47.8,48.2,50,47.3,42.8,45.1,59.6,49.1,48.4,42.6,44.4,44,48.7,42.7,49.6,45.3,49.6,50.5,43.6,45.5,50.5,44.9,45.2,46.6,48.5,45.1,50.1,46.5,45,43.8,45.5,43.2,50.4,45.3,46.2,45.7,54.3,45.8,49.8,46.2,49.5,43.5,50.7,47.7,46.4,48.2,46.5,46.4,48.6,47.5,51.1,45.2,45.2,49.1,52.5,47.4,50,44.9,50.8,43.4,51.3,47.5,52.1,47.5,52.2,45.5,49.5,44.5,50.8,49.4,46.9,48.4,51.1,48.5,55.9,47.2,49.1,47.3,46.8,41.7,53.4,43.3,48.1,50.5,49.8,43.5,51.5,46.2,55.1,44.5,48.8,47.2,null,46.8,50.4,45.2,49.9,46.5,50,51.3,45.4,52.7,45.2,46.1,51.3,46,51.3,46.6,51.7,47,52,45.9,50.5,50.3,58,46.4,49.2,42.4,48.5,43.2,50.6,46.7,52,50.5,49.5,46.4,52.8,40.9,54.2,42.5,51,49.7,47.5,47.6,52,46.9,53.5,49,46.2,50.9,45.5,50.9,50.8,50.1,49,51.5,49.8,48.1,51.4,45.7,50.7,42.5,52.2,45.2,49.3,50.2,45.6,51.9,46.8,45.7,55.8,43.5,49.6,50.8,50.2],[18.7,17.4,18,null,19.3,20.6,17.8,19.6,18.1,20.2,17.1,17.3,17.6,21.2,21.1,17.8,19,20.7,18.4,21.5,18.3,18.7,19.2,18.1,17.2,18.9,18.6,17.9,18.6,18.9,16.7,18.1,17.8,18.9,17,21.1,20,18.5,19.3,19.1,18,18.4,18.5,19.7,16.9,18.8,19,18.9,17.9,21.2,17.7,18.9,17.9,19.5,18.1,18.6,17.5,18.8,16.6,19.1,16.9,21.1,17,18.2,17.1,18,16.2,19.1,16.6,19.4,19,18.4,17.2,18.9,17.5,18.5,16.8,19.4,16.1,19.1,17.2,17.6,18.8,19.4,17.8,20.3,19.5,18.6,19.2,18.8,18,18.1,17.1,18.1,17.3,18.9,18.6,18.5,16.1,18.5,17.9,20,16,20,18.6,18.9,17.2,20,17,19,16.5,20.3,17.7,19.5,20.7,18.3,17,20.5,17,18.6,17.2,19.8,17,18.5,15.9,19,17.6,18.3,17.1,18,17.9,19.2,18.5,18.5,17.6,17.5,17.5,20.1,16.5,17.9,17.1,17.2,15.5,17,16.8,18.7,18.6,18.4,17.8,18.1,17.1,18.5,13.2,16.3,14.1,15.2,14.5,13.5,14.6,15.3,13.4,15.4,13.7,16.1,13.7,14.6,14.6,15.7,13.5,15.2,14.5,15.1,14.3,14.5,14.5,15.8,13.1,15.1,14.3,15,14.3,15.3,15.3,14.2,14.5,17,14.8,16.3,13.7,17.3,13.6,15.7,13.7,16,13.7,15,15.9,13.9,13.9,15.9,13.3,15.8,14.2,14.1,14.4,15,14.4,15.4,13.9,15,14.5,15.3,13.8,14.9,13.9,15.7,14.2,16.8,14.4,16.2,14.2,15,15,15.6,15.6,14.8,15,16,14.2,16.3,13.8,16.4,14.5,15.6,14.6,15.9,13.8,17.3,14.4,14.2,14,17,15,17.1,14.5,16.1,14.7,15.7,15.8,14.6,14.4,16.5,15,17,15.5,15,13.8,16.1,14.7,15.8,14,15.1,15.2,15.9,15.2,16.3,14.1,16,15.7,16.2,13.7,null,14.3,15.7,14.8,16.1,17.9,19.5,19.2,18.7,19.8,17.8,18.2,18.2,18.9,19.9,17.8,20.3,17.3,18.1,17.1,19.6,20,17.8,18.6,18.2,17.3,17.5,16.6,19.4,17.9,19,18.4,19,17.8,20,16.6,20.8,16.7,18.8,18.6,16.8,18.3,20.7,16.6,19.9,19.5,17.5,19.1,17,17.9,18.5,17.9,19.6,18.7,17.3,16.4,19,17.3,19.7,17.3,18.8,16.6,19.9,18.8,19.4,19.5,16.5,17,19.8,18.1,18.2,19,18.7],[181,186,195,null,193,190,181,195,193,190,186,180,182,191,198,185,195,197,184,194,174,180,189,185,180,187,183,187,172,180,178,178,188,184,195,196,190,180,181,184,182,195,186,196,185,190,182,179,190,191,186,188,190,200,187,191,186,193,181,194,185,195,185,192,184,192,195,188,190,198,190,190,196,197,190,195,191,184,187,195,189,196,187,193,191,194,190,189,189,190,202,205,185,186,187,208,190,196,178,192,192,203,183,190,193,184,199,190,181,197,198,191,193,197,191,196,188,199,189,189,187,198,176,202,186,199,191,195,191,210,190,197,193,199,187,190,191,200,185,193,193,187,188,190,192,185,190,184,195,193,187,201,211,230,210,218,215,210,211,219,209,215,214,216,214,213,210,217,210,221,209,222,218,215,213,215,215,215,216,215,210,220,222,209,207,230,220,220,213,219,208,208,208,225,210,216,222,217,210,225,213,215,210,220,210,225,217,220,208,220,208,224,208,221,214,231,219,230,214,229,220,223,216,221,221,217,216,230,209,220,215,223,212,221,212,224,212,228,218,218,212,230,218,228,212,224,214,226,216,222,203,225,219,228,215,228,216,215,210,219,208,209,216,229,213,230,217,230,217,222,214,null,215,222,212,213,192,196,193,188,197,198,178,197,195,198,193,194,185,201,190,201,197,181,190,195,181,191,187,193,195,197,200,200,191,205,187,201,187,203,195,199,195,210,192,205,210,187,196,196,196,201,190,212,187,198,199,201,193,203,187,197,191,203,202,194,206,189,195,207,202,193,210,198],[3750,3800,3250,null,3450,3650,3625,4675,3475,4250,3300,3700,3200,3800,4400,3700,3450,4500,3325,4200,3400,3600,3800,3950,3800,3800,3550,3200,3150,3950,3250,3900,3300,3900,3325,4150,3950,3550,3300,4650,3150,3900,3100,4400,3000,4600,3425,2975,3450,4150,3500,4300,3450,4050,2900,3700,3550,3800,2850,3750,3150,4400,3600,4050,2850,3950,3350,4100,3050,4450,3600,3900,3550,4150,3700,4250,3700,3900,3550,4000,3200,4700,3800,4200,3350,3550,3800,3500,3950,3600,3550,4300,3400,4450,3300,4300,3700,4350,2900,4100,3725,4725,3075,4250,2925,3550,3750,3900,3175,4775,3825,4600,3200,4275,3900,4075,2900,3775,3350,3325,3150,3500,3450,3875,3050,4000,3275,4300,3050,4000,3325,3500,3500,4475,3425,3900,3175,3975,3400,4250,3400,3475,3050,3725,3000,3650,4250,3475,3450,3750,3700,4000,4500,5700,4450,5700,5400,4550,4800,5200,4400,5150,4650,5550,4650,5850,4200,5850,4150,6300,4800,5350,5700,5000,4400,5050,5000,5100,4100,5650,4600,5550,5250,4700,5050,6050,5150,5400,4950,5250,4350,5350,3950,5700,4300,4750,5550,4900,4200,5400,5100,5300,4850,5300,4400,5000,4900,5050,4300,5000,4450,5550,4200,5300,4400,5650,4700,5700,4650,5800,4700,5550,4750,5000,5100,5200,4700,5800,4600,6000,4750,5950,4625,5450,4725,5350,4750,5600,4600,5300,4875,5550,4950,5400,4750,5650,4850,5200,4925,4875,4625,5250,4850,5600,4975,5500,4725,5500,4700,5500,4575,5500,5000,5950,4650,5500,4375,5850,4875,6000,4925,null,4850,5750,5200,5400,3500,3900,3650,3525,3725,3950,3250,3750,4150,3700,3800,3775,3700,4050,3575,4050,3300,3700,3450,4400,3600,3400,2900,3800,3300,4150,3400,3800,3700,4550,3200,4300,3350,4100,3600,3900,3850,4800,2700,4500,3950,3650,3550,3500,3675,4450,3400,4300,3250,3675,3325,3950,3600,4050,3350,3450,3250,4050,3800,3525,3950,3650,3650,4000,3400,3775,4100,3775],["male","female","female",null,"female","male","female","male",null,null,null,null,"female","male","male","female","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male",null,"female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male",null,"male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male",null,"male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male",null,"male","female","male","female","male","female","male","female","male","female","male",null,"male","female",null,"female","male","female","male","female","male","male","female","male","female","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","female","male","female","male","female","male","female","male","female","male","female","male","male","female","female","male","female","male","male","female","male","female","female","male","female","male","male","female","female","male","female","male","female","male","female","male","male","female","male","female","female","male","female","male","male","female"],[2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2007,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2008,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009,2009]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>species<\/th>\n      <th>island<\/th>\n      <th>bill_length_mm<\/th>\n      <th>bill_depth_mm<\/th>\n      <th>flipper_length_mm<\/th>\n      <th>body_mass_g<\/th>\n      <th>sex<\/th>\n      <th>year<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"autoWidth":true,"columnDefs":[{"width":"80px","targets":"_all"},{"className":"dt-right","targets":[3,4,5,6,8]},{"orderable":false,"targets":0}],"order":[],"orderClasses":false,"orderCellsTop":true}},"evals":[],"jsHooks":[]}</script>

In some cases columns are too narrow for the categorical variable filter boxes. Here I widen them in `options` following [this Stack Overflow post](https://stackoverflow.com/a/31814197/2461552).


???

Other options are none (default) and bottom

---

### Add column filters

.pull-left[
Now you can filter by specific columns. 

Numeric columns get range sliders and character columns get select drop-down menus.
]

.pull-right[
<div id="htmlwidget-438af06d0527c1b957cc" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-438af06d0527c1b957cc">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-19.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-leaflet

## leaflet for interactive maps

The [**leaflet** package](https://rstudio.github.io/leaflet/) is popular for making interactive maps.

The package can render spatial objects created from **sf** or **sp** but also works with data.frames that contain latitude/longitude columns or by centering on a specific latitude/longitude.  

--

Start by loading package **leaflet**.


```r
library(leaflet) # v. 2.0.4.1
```

---

class: with-logo logo-leaflet

### Center map with `setView()` 

We'll start with a map centered on Corvallis.  Note the pipe code; this is the common coding style for **leaflet**.


.pull-left[
We center the output  map by providing a latitude and longitude, setting the amount of space around the center with the `zoom` argument in `setView()`.

&lt;br/&gt;
The `addTiles()` layer is key here. This function is how we add maps. By default `OpenStreetMap` tiles are used but others can be used via `addProviderTiles()`.

]

.pull-right[

```r
leaflet() %&gt;% 
*   setView(lng = -123.2620,
*           lat = 44.5646,
*           zoom = 12) %&gt;%
*   addTiles()
```
]

---

class: with-logo logo-leaflet

### Center map with `setView()` 

.pull-left[
Take a a minute and explore the output map in the HTML document.

You can pan and zoom around the resulting map.
]

.pull-right[
&lt;br/&gt;
<div id="htmlwidget-ee7a17cfcc9813d6de87" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-ee7a17cfcc9813d6de87">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-22.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-leaflet

### Add a single marker

**Markers** are added to maps to note places of interest. In interactive maps these markers are often associated with hover or click information.

.pull-left[
Let's add a marker to indicate where OSU is in Corvallis.

&lt;br/&gt;
Here we use `addAwesomeMarkers()` to add an icon as the marker. We must provide the latitude/longitude for marker placement. 

&lt;br/&gt;
The `popup` argument allows information that will pop up when the marker is clicked on, in this case identifying what is at that location.
]

.pull-right[
.smaller[

```r
leaflet() %&gt;% 
    setView(lng = -123.2620, 
            lat = 44.5646, 
            zoom = 12) %&gt;%
    addTiles() %&gt;%
*   addAwesomeMarkers(lng = -123.2794, lat = 44.5638,
*                     icon = awesomeIcons(),
*                     popup = "Oregon State University")
```
]
]

---

class: with-logo logo-leaflet

### Add a single marker

.pull-left[
Explore the new map output.

Click on the icon to see the pop up information.
]

.pull-right[
<div id="htmlwidget-a58e5946da6f835c6d07" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-a58e5946da6f835c6d07">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-24.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-leaflet

### Mapping spatial data

Now let's switch to plotting some spatial data from a data.frame.

We'll work with annual temperature and precipitation data from climate stations throughout the state of Oregon taken from the [UO GEOG 4/595 website](https://pjbartlein.github.io/GeogDataAnalysis/datasets.html).

Note the `lat` and `lon` columns, which are key for mapping with **leaflet**.


```r
orstationc = read.csv("https://pjbartlein.github.io/GeogDataAnalysis/data/csv/orstationc.csv")
head(orstationc)
```

.center[

|station |    lat|      lon| elev| tjan| tjul| tann| pjan| pjul| pann|  idnum|Name                            |
|:-------|------:|--------:|----:|----:|----:|----:|----:|----:|----:|------:|:-------------------------------|
|ANT     | 44.917| -120.717|  846|  0.0| 20.2|  9.6|   41|    9|  322| 350197|ANTELOPE 1 N USA-OR             |
|ARL     | 45.717| -120.200|   96|  0.9| 24.6| 12.5|   40|    6|  228| 350265|ARLINGTON USA-OR                |
|ASH     | 42.217| -122.717|  543|  3.1| 20.8| 11.1|   70|    7|  480| 350304|ASHLAND 1 N USA-OR              |
|AST     | 46.150| -123.883|    2|  5.1| 15.6| 10.3|  287|   26| 1768| 350328|ASTORIA WSO           //R USA-O |
|BKA     | 44.833| -117.817| 1027| -3.8| 19.2|  7.6|   26|   12|  270| 350412|BAKER FAA AIRPORT USA-OR        |
|BKK     | 44.783| -117.833| 1050| -2.8| 20.2|  8.4|   30|   17|  302| 350417|BAKER KBKR USA-OR               |
]

???

Have jan and july temps and precip. We'll look at july temperature.

---

class: with-logo logo-leaflet

### Mapping spatial data

.pull-left[
Note the `data` argument added in `leaflet()`. **leaflet** automatically finds lat/long columns if named something recognizable (e.g., `lng`, `long`, `lat`, `latitude`).

&lt;br/&gt;
Although we `addTiles()` first, the map extent is not set until we add the markers, based on lat/long.

&lt;br/&gt;
We add the climate station locations as circles with `addCircleMarkers()`. The `label` argument adds tooltip info from variables in the dataset; here, average July temperature.
]

.pull-right[
&lt;br/&gt;

```r
*leaflet(data = orstationc) %&gt;%
    addTiles() %&gt;%
*   addCircleMarkers(label = ~tjul)
```

&lt;br/&gt;
**Note:** There are `lng` and `lat` arguments in `addCircleMarkers()`. There are needed if the column names of the lat/long columns aren't recognizable to `leaflet()` in the dataset.
]

???

Not showing writing out lat and lng arguments because it seems fairly standard to leave them out and let leaflet guess when lat/long named appropriately (which is likely usual for spatial data)

---

class: with-logo logo-leaflet

### Mapping spatial data

.pull-left[
Explore the map output.

The map extent is based on the climate station locations, shown as circles.

The average July temperature of each station pops up when you hover over each point.
]

.pull-right[
&lt;br/&gt;
<div id="htmlwidget-6cf49f6884d32c760438" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-6cf49f6884d32c760438">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-28.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-leaflet

### Adding color scale to markers

We can color markers based on the dataset as long as we define a palette.

.pull-left[
We'll color the markers based on the July temperature. We use the Yellow-Orange-Red `RColorBrewer` palette in `colorQuantile()`.

&lt;br/&gt;
The `color` argument is mapped in `addCircleMarkers()`, wrapped in the `pal()` we made. 

We also add a second tooltip to show the name of the climate station when a marker is clicked using `popup`.
]

.pull-right[

```r
*pal = colorQuantile(palette = "YlOrRd",
*                   domain = NULL,
*                   n = 8)
```

&lt;br/&gt;

```r
leaflet(data = orstationc) %&gt;% 
    addTiles() %&gt;%
*   addCircleMarkers(color = ~pal(tjul),
                     label = ~tjul,
*                    popup = ~Name)
```
]

???

I'm not getting into the colorQuantile() code too much here. This is mostly a quick demonstration

---

class: with-logo logo-leaflet

### Adding color scale to markers

.pull-left[
Explore the new map output.

Now the circles are colored based on the average July temperature.

You can hover to get to see the temperature or click to see the climate station name.
]

.pull-right[
&lt;br/&gt;
<div id="htmlwidget-2abe1504366cc2f532f9" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-2abe1504366cc2f532f9">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-31.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

## dygraphs for interactive time series

The [**dygraphs** package](https://rstudio.github.io/dygraphs/index.html) is for plotting interactive time series data.

It is specifically for **xts** time series objects or any object that is convertible to an **xts** object.

--

Start by loading package **dygraphs**.


```r
library(dygraphs) # v. 1.1.1.6
```

---

### Basic time series

We'll use the time series that come with **dygraphs** to look at a few plots.

.pull-left[
The `dygraph()` function is the primary function for making the plots.

First up is a plot of New Haven temperatures through time, using `nhtemp`.

Add a title with `main`.
]

.pull-right[

```r
dygraph(data = nhtemp, 
         main = "Temperatures in New Haven")
```
]

---

### Basic time series

.pull-left[
Explore the output plot in the HTML document.

Hovering over the plot shows the time as well as the data in the line.

You can zoom into part of the time series by selecting an area.

Double-click the plot to zoom back out.
]

.pull-right[
<div id="htmlwidget-1f8db780610ac9e402c3" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-1f8db780610ac9e402c3">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-34.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

### Add range selector

.pull-left[
Add a range selector to the bottom of the plot for panning and zooming via `dyRangeSelector()`.

Note the use of the pipe.
]

.pull-right[

```r
dygraph(data = nhtemp, 
        main = "Temperatures New Haven") %&gt;%
    dyRangeSelector()
```

While we won't explore it here, you can change, e.g., the size, color, and date window within `dyRangeSelector()`.
]

---
### Add range selector

.pull-left[
Explore the range selector in the next plot in the HTML document.
]

.pull-right[
<div id="htmlwidget-c458299ed18b931fd6d9" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-c458299ed18b931fd6d9">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-36.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

### Multiple time series

You can plot multiple time series in a single plot if you have multiple column of time series data in a single time series object.

.pull-left[
We'll see male and female deaths from lung disease in the UK from 1974-1979 from **dygraphs** for this example.

The first step is to bind the two separate time series together into one with `cbind()`.

Then the two time series can be plot together with `dygraphs()`.  Change the names of the series to something more useful using `dySeries()`.
]

.pull-right[

```r
lungDeaths = cbind(mdeaths, fdeaths)
```


```r
dygraph(data = lungDeaths) %&gt;%
    dySeries(name = "mdeaths", 
             label = "Male",
             color = "purple") %&gt;%
    dySeries(name = "fdeaths", 
             label = "Female",
             color = "orange")
```

**Note:** Colors can also be changed to an overall color palette by adding a `dyOptions()` layer (*not shown*)
]

---

### Multiple time series

.pull-left[
The tooltip shows data from both time series at once.

The labels we created are shown in the tooltip.
]

.pull-right[

<div id="htmlwidget-4d33d1b1a1c0ad426911" style="width:100%;height:252px;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-4d33d1b1a1c0ad426911">{"x":{"url":"week08_interactive_elements_files/figure-html//widgets/widget_unnamed-chunk-39.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
]

---

class: with-logo logo-flex

## Build an interactive dashboard

We'll end the day by making a dashboard with interactive elements using [package **flexdashboard**](https://rmarkdown.rstudio.com/flexdashboard/).

A **flexdashboard** is a specialized R Markdown template that allows for basic dashboard layouts. The output is an HTML document.

--

Create a new **flexdashboard** document.

Go to `File &gt; New File &gt; R Markdown...`

Click `From Template` and then choose `Flex Dashboard`. Click `OK` to create.

.center[
&lt;img src="figs/week08_files/new_dashboard.png" title="Image that shows choosing the flex dashboard from the template windown when making a new R Markdown document" alt="Image that shows choosing the flex dashboard from the template windown when making a new R Markdown document" width="65%" /&gt;
]

???

HTML output is the key here

---

class: with-logo logo-flex

## Build an interactive dashboard

There are a variety of dashboard layouts. The default is called a `fill` layout, and has room for three charts. One large left is on the left and two smaller charts are on the left. We'll proceed with this layout, adding code to make the dashboard.

--

Give your dashboard a title in the YAML header and then save it as a `.Rmd` document somewhere on your computer.  I called mine `My Dashboard`.


```r
---
title: "My Dashboard"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---
```

---

class: with-logo logo-flex

## Build an interactive dashboard

Knit the dashboard to see the basic layout, before adding any content.

.pull-right[
&lt;img src="figs/week08_files/first_dashboard.png" title="Image of the initial dashboard, after naming it 'My Dashboard' but before adding any content" alt="Image of the initial dashboard, after naming it 'My Dashboard' but before adding any content" width="100%" /&gt;
]

---

class: with-logo logo-flex

## Build an interactive dashboard

Add the packages you are using in the document into the setup chunk. It currently loads only **flexdashboard**.  We'll add **ggplot2**, **palmerpenguins**, **plotly**, **DT**, and **leaflet**.

This is what your chunk will look like after adding these.

    ```{r setup, include=FALSE}
    library(flexdashboard)
    library(ggplot2)
    library(palmerpenguins)
    library(plotly)
    library(DT)
    library(leaflet)
    ```

---

class: with-logo logo-flex

## Build an interactive dashboard

.pull-left[
Rename  
`### Chart A`  
as  
`### Penguin data`.

Then put a `datatable()` of the penguins dataset in the code chunk in the first section.


```r
datatable(penguins)
```

&lt;br/&gt;
Knit to see dashboard. Note code is suppressed in the dashboard by default.
]

--

.pull-right[
&lt;img src="figs/week08_files/first_chart.png" title="Image of the dashboard with interactive data in the first window" alt="Image of the dashboard with interactive data in the first window" width="100%" /&gt;
]

---

class: with-logo logo-flex

## Build an interactive dashboard

.pull-left[
Now rename  
`### Chart B`  
as  
`### Penguin plot`.

Then add the following **ggplot2** and **plotly** code, which we used earlier.


```r
g1 = ggplot(data = penguins, 
            aes(x = bill_depth_mm, 
                y = bill_length_mm,
                color = species)) +
  geom_point()
ggplotly(g1)
```

Knit to see dashboard.
]

--

.pull-right[
&lt;img src="figs/week08_files/second_chart.png" title="Image of the dashboard with interactive plot in the second window" alt="Image of the dashboard with interactive plot in the second window" width="100%" /&gt;
]

???

You may need to maximize the dashboard to see the plot well.

---

class: with-logo logo-flex

## Build an interactive dashboard

.pull-left[
Finally rename  
`### Chart C`  
as  
`### Climate plot`.

Then add the following **leaflet** code, which we used earlier.


```r
orstationc = read.csv("https://pjbartlein.github.io/GeogDataAnalysis/data/csv/orstationc.csv")
leaflet(data = orstationc) %&gt;% 
    addTiles() %&gt;%
    addCircleMarkers(label = ~tjul)
```

Knit to see dashboard.
]

--

.pull-right[
&lt;img src="figs/week08_files/third_chart.png" title="Image of the dashboard with interactive plot in the third window" alt="Image of the dashboard with interactive plot in the third window" width="100%" /&gt;
]

---

class: with-logo logo-flex

## Sharing your dashboard

.pull-left[
Since the dashboard is a simple HTML document, anyone will be able to view it in the browser. 

&lt;br/&gt;
While you could send it out individually, you could also host it as a page on your website.

&lt;br/&gt;
Alternatively you can send people to a version on GitHub after making a small change to the default link to get a rendered document.
]

.pull-right[
&lt;blockquote class="twitter-tweet" data-lang="en"&gt;&lt;p lang="en" dir="ltr"&gt;Host HTML on GitHub&lt;/p&gt;&amp;mdash; Grant McDermott (@grant_mcdermott) &lt;a href="https://twitter.com/grant_mcdermott/status/1366597702339891202"&gt;Tweet March 01, 2021&lt;/a&gt;&lt;/blockquote&gt;
&lt;script async src="//platform.twitter.com/widgets.js" charset="utf-8"&gt;&lt;/script&gt;
]

---

## Next week

- We'll make animated graphics with package **gganimate**

.center[
&lt;img src="figs/gganimate.png" title="Logo for package gganimate" alt="Logo for package gganimate" width="15%" /&gt;
]

.footnote[
[Code for slides](https://github.com/aosmith16/spring-r-topics/tree/main/docs/slides)  
Slides created via the R packages:  
[**xaringan**](https://github.com/yihui/xaringan), 
[gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer), 
[gadenbuie/xaringanExtra](https://github.com/gadenbuie/xaringanExtra) 
.center[*This work is licensed under the Creative Commons Attribution-NonCommercial 4.0 International License. 
To view a copy of this license, visit http://creativecommons.org/licenses/by-nc/4.0/.*]
]
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
