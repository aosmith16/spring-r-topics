<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>More Git and GitHub</title>
    <meta charset="utf-8" />
    <meta name="author" content="   Ariel Muldoon" />
    <meta name="date" content="2021-05-11" />
    <script src="week07_more_git_files/header-attrs/header-attrs.js"></script>
    <meta name="github-repo" content="aosmith16/spring-r-topics"/>
    <meta name="twitter:title" content="More Git and GitHub"/>
    <meta name="twitter:description" content="Collaborators, merge conflicts, and pull requests"/>
    <meta name="twitter:url" content="https://aosmith16.github.io/spring-r-topics/slides/week07_more_git.html"/>
    <meta name="twitter:image:src" content="https://raw.githubusercontent.com/aosmith16/spring-r-topics/main/slides/week07-share-card.png"/>
    <meta name="twitter:image:alt" content="Slides on a few additional Git/Github slides Working sessions class spring 2021"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@aosmith16"/>
    <meta name="twitter:site" content="@aosmith16"/>
    <meta property="og:title" content="More Git and GitHub"/>
    <meta property="og:description" content="Collaborators, merge conflicts, and pull requests"/>
    <meta property="og:url" content="https://aosmith16.github.io/spring-r-topics/slides/week07_more_git.html"/>
    <meta property="og:image" content="https://raw.githubusercontent.com/aosmith16/spring-r-topics/main/slides/week07-share-card.png"/>
    <meta property="og:image:alt" content="Slides on a few additional Git/Github slides Working sessions class spring 2021"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Ariel Muldoon"/>
    <script src="week07_more_git_files/fabric/fabric.min.js"></script>
    <link href="week07_more_git_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="week07_more_git_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30}) })</script>
    <script src="week07_more_git_files/clipboard/clipboard.min.js"></script>
    <link href="week07_more_git_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="week07_more_git_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="week07_more_git_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="week07_more_git_files/tile-view/tile-view.js"></script>
    <script src="week07_more_git_files/js-cookie/js.cookie.js"></script>
    <script src="week07_more_git_files/peerjs/peerjs.min.js"></script>
    <script src="week07_more_git_files/tiny.toast/toast.min.js"></script>
    <link href="week07_more_git_files/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="week07_more_git_files/xaringanExtra-broadcast/broadcast.js"></script>
    <link href="week07_more_git_files/countdown/countdown.css" rel="stylesheet" />
    <script src="week07_more_git_files/countdown/countdown.js"></script>
    <link rel="stylesheet" href="xaringan-themer.css" type="text/css" />
    <link rel="stylesheet" href="wrap.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# More Git and GitHub
## Ô∏è <svg viewBox="0 0 448 512" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M100.59 334.24c48.57 3.31 58.95 2.11 58.95 11.94 0 20-65.55 20.06-65.55 1.52.01-5.09 3.29-9.4 6.6-13.46zm27.95-116.64c-32.29 0-33.75 44.47-.75 44.47 32.51 0 31.71-44.47.75-44.47zM448 80v352a48 48 0 0 1-48 48H48a48 48 0 0 1-48-48V80a48 48 0 0 1 48-48h352a48 48 0 0 1 48 48zm-227 69.31c0 14.49 8.38 22.88 22.86 22.88 14.74 0 23.13-8.39 23.13-22.88S258.62 127 243.88 127c-14.48 0-22.88 7.84-22.88 22.31zM199.18 195h-49.55c-25-6.55-81.56-4.85-81.56 46.75 0 18.8 9.4 32 21.85 38.11C74.23 294.23 66.8 301 66.8 310.6c0 6.87 2.79 13.22 11.18 16.76-8.9 8.4-14 14.48-14 25.92C64 373.35 81.53 385 127.52 385c44.22 0 69.87-16.51 69.87-45.73 0-36.67-28.23-35.32-94.77-39.38l8.38-13.43c17 4.74 74.19 6.23 74.19-42.43 0-11.69-4.83-19.82-9.4-25.67l23.38-1.78zm84.34 109.84l-13-1.78c-3.82-.51-4.07-1-4.07-5.09V192.52h-52.6l-2.79 20.57c15.75 5.55 17 4.86 17 10.17V298c0 5.62-.31 4.58-17 6.87v20.06h72.42zM384 315l-6.87-22.37c-40.93 15.37-37.85-12.41-37.85-16.73v-60.72h37.85v-25.41h-35.82c-2.87 0-2 2.52-2-38.63h-24.18c-2.79 27.7-11.68 38.88-34 41.42v22.62c20.47 0 19.82-.85 19.82 2.54v66.57c0 28.72 11.43 40.91 41.67 40.91 14.45 0 30.45-4.83 41.38-10.2z"></path></svg> + <svg viewBox="0 0 496 512" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"> <path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
### <br/><br/><br/>Ariel Muldoon
### May 11, 2021

---
















class: hide-logo

## Today's Goal

**Practice working with version-controlled projects with Git, specifically focusing on tools for collaboration.**

We will  

-     Review the `README.md` file    
-     Add collaborators to a repository on GitHub      
-     Solve a merge conflict with GitKraken  
-     Learn to do a basic pull request using helper functions from package **usethis**  

--

&lt;br/&gt;

Today we extend the very basic work done in the week 1 slides. If you've never worked with Git/GitHub before, review [those slides](https://aosmith16.github.io/spring-r-topics/slides/week01_introduction_git_and_github.html) before proceeding.


???

Today won't make anybody an expert, but will get started doing more with the resources on next slide for when they decide to start doing more

---

class: hide-logo

## Resources

- GitHub articles on [adding collaborators](https://docs.github.com/en/github/setting-up-and-managing-your-github-user-account/inviting-collaborators-to-a-personal-repository) and [README files](https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/about-readmes) 
- Brief [article](https://blog.axosoft.com/merge-conflict-tool/) from GitKraken on their merge conflict tool  
- Package **usethis** [article](https://usethis.r-lib.org/articles/articles/pr-functions.html) on pull request helpers  
- A lecture in the [R programming for biologists class](https://r-bio.github.io/intro-git-rstudio/#pull-requests) outlines the basic approach to pull requests *without* **usethis**  

.center[
&lt;img src="figs/week07_files/usethis_logo.png" title="usethis hex logo" alt="usethis hex logo" width="25%" /&gt;
]

---

class: hide-logo

## The README file

It is standard to have `README.md` file in your GitHub repository.  You should take time to expand this file, describing what project you are working on and why it is important. 

--

&lt;br/&gt;&lt;br/&gt;
The README file is a Markdown document.  Markdown projects render to HTML on GitHub, so the information in the file will automatically be included on the main page of your repository.

Markdown syntax is what you use to write R Markdown, so you already know the basic syntax for adding information to your README. üéâ


???

Information to include may be what is in the project, why you are doing the project, metadata on the project like where data comes from, etc.

---

class: hide-logo

## The README file

Here's an example of the README file from the GitHub repository for the class website.

.center[
&lt;img src="figs/week07_files/readme_example.png" title="Screenshot of class webiste repository to show how the README file is rendered below the files" alt="Screenshot of class webiste repository to show how the README file is rendered below the files" width="40%" /&gt;
]

???

Main point here is that the README renders and is on the repo home page

---

class: hide-logo

## Examples of wild-caught README's

Let's spend a few minutes looking some README examples.

Some of the easiest examples to find of a good README in the wild is for R packages, such as on the [palmerpenguins](https://github.com/allisonhorst/palmerpenguins) repository.

--

&lt;br/&gt;&lt;br/&gt;
But plenty of people use repositories for other types of work. Here are examples for what people include in their README when working on a paper or talk/workshop instead of an R package.

- [Hill and Grolemund's repository for a workshop](https://github.com/rstudio-conf-2020/intro-to-ml-tidy)  
- [Christopherson et al.'s project repo](https://github.com/UW-MSDS-DATA-598-Reproducibility-WI20/Christopherson-Garcia-Todd-Winegarden-replication-project) demonstrates information you might want for an analysis repository    

.footnote[
For research projects you can use GitHub to make a *research compendium*. See the [Marwick et al. paper](https://peerj.com/preprints/3192v1/) and an [example compendium](https://github.com/benmarwick/1989-excavation-report-Madjedbebe).
]

???

Purposefully focusing on more "applied" README examples, since that is audience here. Not all README's need to go into this much detail.

---

class: center, middle, inverse, hide-logo

# &lt;font style="font-family: cursive; font-style:italic"&gt;Let's get started!&lt;/font&gt;

---

class: hide-logo

## Make a new GitHub &lt;svg viewBox="0 0 496 512" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"&gt;&lt;/path&gt;&lt;/svg&gt; repository

Make a new GitHub repository called `merge-conflict`.

Remember in Week 1 you learned to first create a new repository on GitHub, clone it via the "Code" button, and use the copied URL to make a version-controlled RStudio Project on your computer.

<div class="countdown" id="timer_6079c227" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">05</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

???

They may have forgotten how to do this, so be prepared to answer questions.

---

class: hide-logo

## Add a collaborator

Right now you are the only person who can make changes to your GitHub repository.

Add *collaborators* if you'd like others to also be able to work directly on the repository.

--

1. Start by going to your `merge-conflict` repository and then go to `Settings`.

.center[
&lt;img src="figs/week03_files/github_settings.png" title="Screenshot showing the 'Settings' button at the right of menus along the top of the GitHub repository, The button has been circled to draw attention to it." alt="Screenshot showing the 'Settings' button at the right of menus along the top of the GitHub repository, The button has been circled to draw attention to it." width="100%" /&gt;
]

---

class: hide-logo

## Add a collaborator

Right now you are the only person who can make changes to your GitHub repository.

Add *collaborators* if you'd like others to also be able to work directly on the repository.

1. Start by going to your `merge-conflict` repository and then go to `Settings`.
2. From the left-hand menu choose `Manage Access` (second menu item from the top).

.center[
&lt;img src="figs/week07_files/manage_access.png" title="Screenshot of first three settings menus, where 'Manage access' is the second one of the three" alt="Screenshot of first three settings menus, where 'Manage access' is the second one of the three" width="30%" /&gt;
]

---

class: hide-logo

## Add a collaborator

Right now you are the only person who can make changes to your GitHub repository.

Add *collaborators* if you'd like others to also be able to work directly on the repository.

1. Start by going to your `merge-conflict` repository and then go to `Settings`.
2. From the left-hand menu choose `Manage Access` (second menu item from the top).
3. Click on the "Invite a collaborator" button.

---

class: hide-logo

## Add a collaborator

Right now you are the only person who can make changes to your GitHub repository.

Add *collaborators* if you'd like others to also be able to work directly on the repository.

1. Start by going to your `merge-conflict` repository and then go to `Settings`.
2. From the left-hand menu choose `Manage Access` (second menu item from the top).
3. Click on the "Invite a collaborator" button.
4. Find the collaborator you want to add using their GitHub user name, email, or their full name.  Once you've selected someone, click the green button to send them an invite. My user name is `aosmith16` if you'd like to invite me for practice. üòÅ

.center[
&lt;img src="figs/week07_files/add_collaborator.png" title="Screenshot to show how to add a collaborator using a GitHub user name" alt="Screenshot to show how to add a collaborator using a GitHub user name" width="30%" /&gt;
]

???

They can invite me if that's easiest. 

---

class: hide-logo

## Add a collaborator

Right now you are the only person who can make changes to your GitHub repository.

Add *collaborators* if you'd like others to also be able to work directly on the repository.

1. Start by going to your `merge-conflict` repository and then go to `Settings`.
2. From the left-hand menu choose `Manage Access` (second menu item from the top).
3. Click on the "Invite a collaborator" button.
4. Find the collaborator you want to add using their GitHub user name, email, or their full name.  Once you've selected someone, click the green button to send them an invite. My user name is `aosmith16` if you'd like to invite me for practice. üòÅ
5. The person will get an invite and then has 7 days to accept. Once they do they can clone the repository and work on it the same way you can.


---

class: hide-logo

## Merge conflicts

A *merge conflict* is when the same lines of a file has been changed by two separate people. These are more common once you have multiple people collaborating on the files in the same repository.

I am going to have you create a merge conflict by working on GitHub directly and on the local version of files simultaneously.  

--

We'll use GitKraken's merge tool to address the conflict.

Make sure you have GitKraken installed on your computer.

.center[
&lt;img src="figs/week01_files/gitkraken.png" title="GitKraken logo" alt="GitKraken logo" width="20%" /&gt;
]

---

class: hide-logo

### Change README on GitHub

Go to your `merge-conflict` repository and GitHub and open the `README.md` file. 

Click on the edit button in the right-hand corner.

.center[
&lt;img src="figs/week07_files/github_readme2.png" title="Screenshot with the cursoer hovering over the pencil shaped edit button when editing the README file directly on GitHub" alt="Screenshot with the cursoer hovering over the pencil shaped edit button when editing the README file directly on GitHub" width="75%" /&gt;
]

???

The edit button has a picture of a pencil on it.

---

class: hide-logo

### Change README on GitHub

Replace the current title and description in the README with:

```
# Merge conflict
Practice dealing with a merge conflict
```

---

class: hide-logo

### Change README on GitHub

After making the change, scroll down to `Commit` the changes. Write a commit message in the first box and then hit the `Commit changes` box. I used `Update README` as my commit message.

.center[
&lt;img src="figs/week07_files/commit_github2.png" title="Screenshot of committing the changes to the README file made directly on GitHub" alt="Screenshot of committing the changes to the README file made directly on GitHub" width="70%" /&gt;
]

---

class: hide-logo

### Change README locally

Now go into your project in RStudio and edit the README there.

Open the file and replace the current title and description with:

```
# Practice a merge conflict
We will practice a merge conflict
```

---

class: hide-logo

### Change README locally

Save your changes and then `Stage` - `Commit` - `Push`.

The `Push` will fail, but note the useful message.

.center[
&lt;img src="figs/week07_files/push_fail.png" title="Screenshot of failure to push from local repository when there are changes on GitHub that haven't been pulled in yet" alt="Screenshot of failure to push from local repository when there are changes on GitHub that haven't been pulled in yet" width="80%" /&gt;
]

???

This tells us that we are missing work done elsewhere that is on GitHub so we need to `Pull`.

---

class: hide-logo

## Pull changes from GitHub

When working with multiple people or working alone but from multiple devices you need to `Pull` changes from GitHub before you can `Push` changes you made locally.

The message in the last slide indicated we hadn't done this. `Pull` using the pull button in the `Git` Pane.

???

Forgetting to pull before working on a local repo is one of my most common mistakes!

--

Now we get a message about a merge conflict.

.center[
&lt;img src="figs/week07_files/merge_conflict.png" title="Screenshot of merge conflict message after trying to pull changes GitHub when we've also changed the same files in the local repository" alt="Screenshot of merge conflict message after trying to pull changes GitHub when we've also changed the same files in the local repository" width="80%" /&gt;
]

???

It attempted to auto-merge, which can work, but fails since the same lines are changed.

---

class: hide-logo

## Open GitKraken

We will switch to GitKraken to make use of their merge conflict tool.

You will be asked to sign in to GitKraken. Choose the first option to sign in with your GitHub account.

.center[
&lt;img src="figs/week07_files/open_gitkraken.png" title="Screenshot showing the initial window in GitKraken that asks for a sign in. The top button allows you to use GitHub as your sign in" alt="Screenshot showing the initial window in GitKraken that asks for a sign in. The top button allows you to use GitHub as your sign in" width="50%" /&gt;
]

---

class: hide-logo

## Open GitKraken

A new window will pop up in your web browser that will ask you to authorize GitKraken to access GitHub. Continue with the authorization.

.center[
&lt;img src="figs/week07_files/authorize_gitkraken.png" title="Screenshot of window that opens in the browser when authenticating GitKraken using your GitHub account" alt="Screenshot of window that opens in the browser when authenticating GitKraken using your GitHub account" width="100%" /&gt;
]

---

class: hide-logo

## Open GitKraken

You should then get a `Success` message, and you are ready to open the local `merge-conflict` repository in GitKraken.

.center[
&lt;img src="figs/week07_files/success_gitkraken.png" title="Screenshot to show a successful authorization of GitKraken through your GitHub account" alt="Screenshot to show a successful authorization of GitKraken through your GitHub account" width="50%" /&gt;
]

---

class: hide-logo

## Open repository in GitKraken

.pull-left[
In GitKraken click the `Open a repo` button.

.center[
&lt;img src="figs/week07_files/open_repo1.png" title="Screenshot showing the 'Open a repo' button that is on the main screen of GitKraken after you've authorized" alt="Screenshot showing the 'Open a repo' button that is on the main screen of GitKraken after you've authorized" width="70%" /&gt;
]
]

--

.pull-right[
Then choose `Open a Repository`. 

&lt;img src="figs/week07_files/open_repo2.jpg" title="Screenshot showing second step for opening a repository, where cursor hovers over 'Open a Repository'" alt="Screenshot showing second step for opening a repository, where cursor hovers over 'Open a Repository'" width="100%" /&gt;

Navigate to the folder that contains the local version of your `merge-conflict` repository and `Select Folder`. The repository will open in GitKraken.
]

---

class: hide-logo

### Merge conflict message

.pull-left[
Since we currently have a merge conflict, you will see the message `Merge conflict detected` on the right-hand side of GitKraken. 

&lt;br/&gt;
Any files with a merge conflict are listed in the window under the message.  Currently this shows `README.md`, the file that has a conflict.
]

.pull-right[
&lt;img src="figs/week07_files/gitkraken_merge_message.png" title="Screenshot showing the right-hand side of GitKraken where the merge conflict message and files that have merge conflicts show up" alt="Screenshot showing the right-hand side of GitKraken where the merge conflict message and files that have merge conflicts show up" width="100%" /&gt;
]

---

class: hide-logo

### GitKraken merge conflict tool

Double-click on `README.md` in the merge conflict window to open GitKraken's merge conflict tool.

.center[
&lt;img src="figs/week07_files/merge_tool2.png" title="Screenshot of what merge conflict tool looks like when first opened, showing the two top boxes with the two different versions and the bottom box for the Output" alt="Screenshot of what merge conflict tool looks like when first opened, showing the two top boxes with the two different versions and the bottom box for the Output" width="80%" /&gt;
]

???

The top two panes show the two versions of the document.  The bottom pane, "Output", shows the original file and will update to show changes as we choose which lines we want to keep.

---

class: hide-logo

### GitKraken merge conflict tool

We can choose all lines from one of the two versions by clicking the box. Here I show clicking on the "A" box to add the content to the `Output`. I then remove a line from `Output` by clicking next to that line. 

.center[
&lt;img src="figs/week07_files/choose_ab.png" title="Screenshot showing clicking the box next to the left version to add all lines to the Output in the merge conflict tool. The cursor is on the the second line of Output to show I can remove the line by clicking next to it." alt="Screenshot showing clicking the box next to the left version to add all lines to the Output in the merge conflict tool. The cursor is on the the second line of Output to show I can remove the line by clicking next to it." width="80%" /&gt;
]

---

class: hide-logo

### GitKraken merge conflict tool

I ultimately add the top line from version "A" and the bottom line from version "B" to make a final, combined version of `README.md`.  Click on `Save` in the upper right when you're done.

.center[
&lt;img src="figs/week07_files/final_merge_output.png" title="Screenshot showing my final choices for merging in the Output window, taking one line from the first version and one line from the second" alt="Screenshot showing my final choices for merging in the Output window, taking one line from the first version and one line from the second" width="80%" /&gt;
]

???

Students should play around with adding all lines or just one line or some combination.

---

class: hide-logo

## GitKraken commit and push

.pull-left[
After saving, GitKraken will show that `README.md` has been staged on the right-hand side of the GitKraken window.

&lt;br/&gt;&lt;br/&gt;
Write a commit message and then click `Commit and Merge`.
]

.pull-right[
&lt;img src="figs/week07_files/commit_merge.png" title="Screenshot of the left side of GitKraken, where the merged files have been staged and you need to add message and commit the changes" alt="Screenshot of the left side of GitKraken, where the merged files have been staged and you need to add message and commit the changes" width="100%" /&gt;

]

---

class: hide-logo

## GitKraken commit and push

`Push` these changes to GitHub with the push button found at the top of the GitKraken window.

.center[
&lt;img src="figs/week07_files/push_gitkraken.png" title="Screenshot showing the GitKraken push button up at the top of your screen" alt="Screenshot showing the GitKraken push button up at the top of your screen" width="50%" /&gt;
]

&lt;br/&gt;&lt;br/&gt;
Once you `Push` these changes you're done. If you go back to the project in RStudio you'll find the merge conflict message is gone and everything is up-to-date.

You can now close GitKraken and close the `merge-conflict` Project in RStudio.

---

class: hide-logo

## Pull requests

Finally, we will talk about how to make a *pull request* to propose changes to a repository.

A pull request is how you can propose changes to a GitHub repository. If accepted, the person who maintains the repository will *pull* your changes in to change the contents of their repo.

--

&lt;br/&gt;&lt;br/&gt;
Today we will practice making a pull request on someone else's repository.  

However, using pull requests is a reasonable way to approach working with collaborators on a shared repository to avoid merge conflicts. 

One difference from the process shown here will be that you won't need to *fork* a repository you already own.

---

## Pull requests

We'll be using helper functions from package **usethis** for pull requests today.

We will start by setting up a *personal access token* or PAT from GitHub, which is required for using the pull request functions in package **usethis**.

.center[
&lt;img src="figs/week07_files/usethis_logo.png" title="usethis hex sticker" alt="usethis hex sticker" width="30%" /&gt;
]

---

## Get personal access token (PAT)

See complete instructions and important additional information about managing your credentials at [Managing Git(Hub) Credentials](https://usethis.r-lib.org/articles/articles/git-credentials.html).

This process is necessary only once per computer or if a PAT has been compromised for some reason and you need a new one.

--

&lt;br/&gt;&lt;br/&gt;
**Important:** I will be showing you a screenshot and example code that includes a GitHub PAT. It is important you do not give or show your PAT to anyone. Since the PAT I used to create these slides is compromised I deleted it and created a new one.

???

Make sure they understand that a PAT should be protected and I'm showing one for educational purposes only.

---

## Get personal access token (PAT)

Make sure you are signed in to GitHub.

Create a token using function `create_github_token()` from package **usethis**. Run the following code in your R Console or paste into a script and run from there.


```r
usethis::create_github_token()
```

You will see a message like the one below and then you will be taken to GitHub.

```
* Call `gitcreds::gitcreds_set()` to register this token in the local Git credential store
It is also a great idea to store this token in any password-management software that you use
‚àö Opening URL 'https://github.com/settings/tokens/new?scopes=repo,user,gist,workflow&amp;description=R:GITHUB_PAT'
```
    
---

## Get personal access token (PAT)

In GitHub you will give the new PAT a name. This name should allow you to recognize which computer it is for.

.center[
&lt;img src="figs/week07_files/new_PAT.png" title="Screenshot showing the name given to the created PAT so you can identify which computer it is for. I added 'laptop' to the name so I would remember it was the PAT for my laptop" alt="Screenshot showing the name given to the created PAT so you can identify which computer it is for. I added 'laptop' to the name so I would remember it was the PAT for my laptop" width="50%" /&gt;
]

&lt;br/&gt;&lt;br/&gt;
After naming, scroll down to the bottom and click `Create PAT`.  **usethis** has already filled in some recommended scopes and we'll leave them all as is.

---

## Get personal access token (PAT)

Once you create the PAT you will see a page with the token. Once you leave this page you won't see it again.

**Important:** Make sure you copy the PAT for the next step using the clipboard button before exiting the page.

&lt;br/&gt;
.center[
&lt;img src="figs/week07_files/copy_PAT.png" title="Screenshot showing an example of a created PAT that needs to be copied to your clipboard" alt="Screenshot showing an example of a created PAT that needs to be copied to your clipboard" width="70%" /&gt;
]

---

## Store personal access token (PAT)

.pull-left[
Back in R, we can *store* the PAT using the **gitcreds** package. This was installed when you installed **usethis**.

**Note:** You *must* have package **gh** version 1.2.1 or higher installed for this to work.
]

.pull-right[
Type in and run the following code in R. 

I'm avoiding copying and pasting here because your PAT is currently on your clipboard and you need that in your next step. üôÇ


```r
gitcreds::gitcreds_set()
```
]

???

Students may want to type out the gitcreds command since they have the PAT on the clipboard.

---

## Store personal access token (PAT)

If you have no credentials stored, you will be prompted to enter your token. Paste it and press enter.

--

.pull-left[
If you do have credentials stored you will see something like:

.smaller[
```
-&gt; Your current credentials for 'https://github.com':

  protocol: https
  host    : github.com
  path    : 
  username: PersonalAccessToken
  password: &lt;-- hidden --&gt;

-&gt; What would you like to do? 

1: Keep these credentials
2: Replace these credentials
3: See the password / token

Selection:
```
]
]

--

.pull-right[
I chose `2` and then was prompted to enter my new token.

.smaller[
```
Selection: 2

-&gt; Removing current credentials...

? Enter new password or token: 
```
]

I then pasted my PAT and pressed enter to finish the process.

.smaller[
```
? Enter new password or token: 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
-&gt; Adding new credentials...
-&gt; Removing credetials from cache...
-&gt; Done.
```
]
]

???

Again I have shown my PAT and so compromised it so I deleted it and made a new one.

---

## Make pull request

Now that we have stored a PAT we can start the pull request process.

For more complete instructions, including instructions on how to edit pull requests, see the **usethis** article on [Pull request helpers](https://usethis.r-lib.org/articles/articles/pr-functions.html).


We're using **usethis** to do some of the heavy lifting here but you can absolutely do this process without it. You can see the basic "manual" approach in the materials for [R programming for biologists](https://r-bio.github.io/intro-git-rstudio/#pull-requests)

---

### Fork and clone a repository

This step is important if you are going to propose a change to someone else's repository.

To *fork* means you make your own copy of the repository on GitHub.

Then *clone* to make a local version of the repository.

???

Students have cloned before manually by copying the github repo URL using the "Code" button on GitHub

--

&lt;br/&gt;&lt;br/&gt;
I'll have you practice making a pull request on one of my repository's, called `practice-repo`. My user name is `aosmith16`.

Fork and clone code to run in R:


```r
usethis::create_from_github("aosmith16/practice-repo")
```

???

Copy and paste the R code into your R Console to run it.

---

### Fork and clone a repository

.pull-left[
You will see a series of messages as **usethis** does work behind the scenes:

.smaller[
```
i Defaulting to 'https' Git protocol
‚àö Setting `fork = TRUE`
‚àö Creating 'C:/Users/ariel/Desktop/practice-repo/'
‚àö Forking 'aosmith16-testing/practice-repo'
‚àö Cloning repo from 'https://github.com/aosmith16/practice-repo.git' into 'C:/Users/ariel/Desktop/practice-repo'
‚àö Setting active project to 'C:/Users/ariel/Desktop/practice-repo'
i Default branch is 'master'
‚àö Adding 'upstream' remote: 'https://github.com/aosmith16/practice-repo.git'
‚àö Pulling changes from 'upstream/master' (default branch of source repo)
‚àö Setting remote tracking branch for local 'master' branch to 'upstream/master'
‚àö Writing 'practice-repo.Rproj'
‚àö Adding '.Rproj.user' to '.gitignore'
‚àö Opening 'C:/Users/ariel/Desktop/practice-repo/' in new RStudio session
‚àö Setting active project to '&lt;no active project&gt;'

```
]
]

.pull-right[
At the end a new RStudio Project will open from the new local directory for the forked repository.

By default **usethis** will make the local directory on your Desktop. This is usually OK since the local version is temporary; most often you will delete it after finishing your pull request.

You can set a different location for the directory using the `destdir` argument in `create_from_github()`.
]

---

### Create branch to work in

Before you commence making changes to the repository you need to make a new *branch*.  Avoid making changes to the default branch, which is `master` here but for newer repositories is often `main`.

Name your branch with your last name plus "prac". Here I named mine `muldoonprac`; names yours based on your own last name.


```r
usethis::pr_init(branch = "muldoonprac")
```

```
‚àö Setting active project to 'C:/Users/ariel/Desktop/practice-repo'
‚àö Pulling changes from 'upstream/master'
‚àö Creating and switching to local branch 'muldoonprac'
* Use `pr_push()` to create PR.
```

---

### Edit repository

Now you are working in a new branch and can proceed making your proposed changes.

Today I want each of you to:
- Create a new R Markdown document with HTML output 
- Put your name as the title
- Save the document using your last name, like `lastname.Rmd`

--

&lt;br/&gt;&lt;br/&gt;
Once you have created and saved the new document, `Stage` and `Commit` your changes. Note the `Push` button is grayed out.

???

No need to knit. It's not the end of the world if they do but trying to keep this simple with just a Rmd doc

---

### Create pull request

Once you have finished with the edits and committed them, create a pull request (PR) using `pr_push()`.


```r
usethis::pr_push()
```

You will see some messages in RStudio:

```
‚àö Pushing local 'muldoonprac' branch to 'origin' remote
* Create PR at link given below
‚àö Opening URL 'https://github.com/aosmith16/practice-repo/compare/muldoonprac'
```

And then you will be taken to GitHub. This may take a few minutes!

---

### Create pull request

You will do the final steps to make the pull request in GitHub. Click the `Create pull request` button.

.center[
&lt;img src="figs/week07_files/create_pull_request.png" title="Screenshot showing the window you are taken from after using pr_push() from usethis" alt="Screenshot showing the window you are taken from after using pr_push() from usethis" width="70%" /&gt;
]

---

### Create pull request

You then have the option to add a description in addition to your commit message. This is where you can describe what you edited and why.

Once you have added a message click the `Create pull request` button to create the pull request.

.center[
&lt;img src="figs/week07_files/pull_message.png" title="Screenshot showing where you can add a description of your pull request and then finally create it on GitHub" alt="Screenshot showing where you can add a description of your pull request and then finally create it on GitHub" width="65%" /&gt;
]

---

### Maintainer response

Now you need to wait for the maintainer to respond. A simple pull request may be accepted or *merged* right away. That is what will happen today with your practice pull request. üòÑ

&lt;br/&gt;&lt;br/&gt;
A maintainer could ask you to make additional changes or they could make changes on top of the ones you proposed. See how to work with these alternatives in the **usethis** [Pull request helpers article](https://usethis.r-lib.org/articles/articles/pr-functions.html#review-of-the-pull-request).

---

### Maintainer response

.pull-left[
Once you get a response on your pull request you will see a notification in GitHub (blue dot on bell in upper right-hand corner) and an email.

.center[
&lt;img src="figs/week07_files/notification.png" title="Screenshot showing the blue dot on the bell in GitHub that indicates you have a notification" alt="Screenshot showing the blue dot on the bell in GitHub that indicates you have a notification" width="30%" /&gt;
]

Click on the notification &lt;svg viewBox="0 0 448 512" style="height:1em;fill:currentColor;position:relative;display:inline-block;top:.1em;" xmlns="http://www.w3.org/2000/svg"&gt;  &lt;path d="M439.39 362.29c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71zM67.53 368c21.22-27.97 44.42-74.33 44.53-159.42 0-.2-.06-.38-.06-.58 0-61.86 50.14-112 112-112s112 50.14 112 112c0 .2-.06.38-.06.58.11 85.1 23.31 131.46 44.53 159.42H67.53zM224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64z"&gt;&lt;/path&gt;&lt;/svg&gt; and then open the pull request in your Inbox on GitHub.

.center[
&lt;img src="figs/week07_files/github_inbox.png" title="Screenshot showing the inbox after clicking on the notification bell in GitHub. This is where you can see what the maintainer did with the pull request." alt="Screenshot showing the inbox after clicking on the notification bell in GitHub. This is where you can see what the maintainer did with the pull request." width="100%" /&gt;
]

]

???

Notification is shown by the blue dot on the bell in the upper righthand corner.

--
-
.pull-right[
In this case when you open the pull request you will see that it has been merged.

.center[
&lt;img src="figs/week07_files/pull_merge.png" title="Screenshot showing a merged pull request" alt="Screenshot showing a merged pull request" width="100%" /&gt;
]
]

---

### Finish pull request process

Once the pull request has been merged we can clean up on our end.

Back in R, use `pr_finish()` to delete the branch. 


```r
usethis::pr_finish()
```

This does some work behind the scenes so don't be alarmed if it at first it doesn't look like it is doing anything.

```
‚àö Switching back to default branch ('master')
‚àö Pulling changes from 'upstream/master'
‚àö Deleting local 'muldoonprac' branch
‚àö PR 'aosmith16/practice-repo/#9' has been merged, deleting remote branch 'origin/muldoonprac'
```

---

class: hide-logo

### Finish pull request process

If this was a one-time interaction with a repository, manually delete the local directory from your computer.

--

.pull-left[
Back on GitHub, delete the forked repository.

This option is available from the merged pull request if you still have that open. Click on `settings`.

&lt;img src="figs/week07_files/pull_request_closed.png" title="Screenshot to show what the message in the pull request is after it has been merged and the branch close. You can click on 'settings' to delete the forked repository" alt="Screenshot to show what the message in the pull request is after it has been merged and the branch close. You can click on 'settings' to delete the forked repository" width="100%" /&gt;

Then enter your user name and repository name as requested to delete the forked repository.
]

.pull-right[
.center[
&lt;img src="figs/week07_files/delete_repo.png" title="Screenshot showing the process to delete a repository, where you enter the username and repo name to make sure you aren't deleting by mistake" alt="Screenshot showing the process to delete a repository, where you enter the username and repo name to make sure you aren't deleting by mistake" width="80%" /&gt;
]
]

--

Alternatively, go to your version of the GitHub repository and then `Settings`. Scroll down, down, down to the "Danger Zone" üò±. Click `Delete this repository` and follow instructions.

---

class: hide-logo

## Next week

- We'll briefly explore a few packages for making interactive plots and tables that can be used with HTML outputs  
- We'll end by making a simple dashboard with package **flexdashboard**  
- Make sure you have current versions of **htmlwidgets**, **palmerpenguins**, **ggplot2**, **plotly**, **DT**, **leaflet**, **dygraphs**, and **flexdashboard** installed  

.footnote[
[Code for slides](https://github.com/aosmith16/spring-r-topics/tree/main/docs/slides)  
Slides created via the R packages:  
[**xaringan**](https://github.com/yihui/xaringan), 
[gadenbuie/xaringanthemer](https://github.com/gadenbuie/xaringanthemer), 
[gadenbuie/xaringanExtra](https://github.com/gadenbuie/xaringanExtra) 
.center[*This work is licensed under the Creative Commons Attribution-NonCommercial 4.0 International License. 
To view a copy of this license, visit http://creativecommons.org/licenses/by-nc/4.0/.*]
]

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script src="https://platform.twitter.com/widgets.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": false,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();</script>
<style>
.logo {
  background-image: url(figs/week07_files/usethis_logo.png);
  background-size: contain;
  background-repeat: no-repeat;
  position: absolute;
  top: 1em;
  right: 1em;
  width: 110px;
  height: 128px;
  z-index: 0;
}
</style>

<script>
document
  .querySelectorAll(
    '.remark-slide-content' +
    ':not(.title-slide)' +
    // add additional classes to exclude here, e.g.
    // ':not(.inverse)' +
    ':not(.hide-logo)'
  )
  .forEach(el => {
    el.innerHTML += '<div class="logo"></div>';
  });
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
